<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Where the fuck is my girlfriend?</title>

  <!-- Google Fonts: Pinyon Script (title) + Zain (day) -->
  <link href="https://fonts.googleapis.com/css2?family=Pinyon+Script&family=Zain:wght@700;900&display=swap" rel="stylesheet">

  <style>
    :root {
      --bg1:#eddcff;            /* pastel lavender */
      --bg2:#dcc6ff;
      --card-bg: rgba(255,255,255,0.16);
      --ink:#1b1330;            /* deep purple for body text */
      --ring: rgba(255,255,255,0.45);
      --accent:#b388ff;
      --shadow: 0 12px 30px rgba(20,10,40,.18);
      --title-box:#ffffffea;    /* box behind title */
      --day-box:#ffffffea;      /* box behind day */
    }

    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body{
      margin:0;
      /* Gradient + tiny repeating SVG hearts */
      background:
        url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='28' height='28'><path d='M14 22s-7-4.7-9.5-8.1c-2.1-2.9-1.1-6.9 2.2-8 1.9-.6 4 .2 5.1 1.7 1.2-1.5 3.3-2.3 5.1-1.7 3.3 1.1 4.3 5.1 2.2 8C21 17.3 14 22 14 22z' fill='%23ffffff22'/></svg>") repeat,
        linear-gradient(160deg,var(--bg1),var(--bg2));
      background-size: 28px 28px, auto;
      font-family: system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Apple Color Emoji","Segoe UI Emoji";
      display:grid;
      place-items:center;
      padding:24px;
      color:var(--ink);
    }

    .wrap{ width:min(840px,95vw); text-align:center; }

    /* Title + Day with boxes behind */
    .title-box{
      display:inline-block;
      background:var(--title-box);
      border:2px solid var(--ring);
      border-radius:18px;
      padding:10px 14px;
      box-shadow: var(--shadow);
    }
    .title{
      margin:0;
      font-family:'Pinyon Script', cursive;
      font-size: clamp(28px, 6vw, 54px);
      font-weight: 400;
      color:#000;               /* black as requested */
      line-height:1.05;
    }

    .sp{ height: 14px; }
    .sp-lg{ height: 22px; }

    .day-box{
      display:inline-block;
      background:var(--day-box);
      border:2px solid var(--ring);
      border-radius:14px;
      padding:6px 12px;
      box-shadow: var(--shadow);
      margin-top:8px;
    }
    #dayLabel{
      margin:0;
      font-family:'Zain', system-ui, sans-serif;
      font-weight:900;                    /* ‚ÄúBlack‚Äù weight */
      font-size: clamp(20px, 4.5vw, 36px);
      letter-spacing:.3px;
      color:#000;                         /* black day text */
    }

    .card{
      margin-top:22px;
      background:var(--card-bg);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      border:2px solid var(--ring);
      border-radius:22px;
      padding:22px clamp(14px,4vw,28px);
      box-shadow: var(--shadow);
      color:var(--ink);
      position:relative;
      text-align:center;
    }

    .big{
      font-size: clamp(24px, 4.8vw, 36px);
      font-weight: 900;
      line-height: 1.2;
    }
    .range, .clock{
      font-size: clamp(14px, 2.8vw, 18px);
      opacity: 0.9;
      margin-top: 10px;
    }

    /* TZ toggle with emojis */
    .tz-toggle{
      position:absolute; top:10px; right:10px;
      background: var(--accent);
      color:#fff; border:none; cursor:pointer;
      font-weight:800; border-radius:999px;
      padding:6px 12px; box-shadow:0 8px 18px rgba(0,0,0,.15);
      letter-spacing:.2px;
    }
    .tz-menu{
      position:absolute; top:48px; right:10px;
      background:#fff; color:#1f1236;
      border-radius:12px; border:2px solid var(--ring);
      box-shadow: var(--shadow);
      display:none; min-width: 190px; overflow:hidden;
      text-align:left;
    }
    .tz-item{ padding:10px 12px; cursor:pointer; font-weight:800; border-bottom:1px solid #00000010; }
    .tz-item:last-child{ border-bottom:none; }
    .tz-item:hover{ background:#f3ecff; }

    .footer{ margin-top:16px; font-size:12px; color:#24163ecc; }

    @media (prefers-reduced-motion:no-preference){
      .fade{ animation:fade .4s ease-out; }
      @keyframes fade{ from{opacity:0; transform:translateY(6px)} to{opacity:1; transform:none} }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <!-- Title box -->
    <div class="title-box">
      <h1 class="title">Where the fuck is my girlfriend?</h1>
    </div>

    <div class="sp"></div>

    <!-- Day box -->
    <div class="day-box">
      <h2 id="dayLabel">Loading‚Ä¶</h2>
    </div>

    <div class="sp-lg"></div>

    <!-- Main card -->
    <div class="card fade">
      <!-- Display timezone toggle (with emojis) -->
      <button id="tzToggle" class="tz-toggle" aria-haspopup="true" aria-expanded="false">üå¥ California</button>
      <div id="tzMenu" class="tz-menu" role="menu" aria-label="Display timezone">
        <div class="tz-item" data-tz="CA" role="menuitem">üå¥ California</div>
        <div class="tz-item" data-tz="CHI" role="menuitem">ü´ò Chicago</div>
      </div>

      <div id="status" class="big">Loading‚Ä¶</div>
      <div id="range" class="range">‚Äî</div>
      <div id="clock" class="clock">‚Äî</div>
    </div>

    <div class="footer">Schedule logic stays on California time. Toggle only changes how times display.</div>
  </div>

  <script>
    // ===== Schedule (anchored to California) =====
    // 24h "HH:MM"; start inclusive, end exclusive.
    const schedule = {
      1: [
        { name: "Chemistry",           start: "10:00", end: "10:50" },
        { name: "Intro to Psychology", start: "11:00", end: "12:15" },
        { name: "Uncanny",             start: "13:15", end: "14:30" },
      ],
      2: [ { name: "Reasoning bout Unreasonable", start: "11:00", end: "12:15" } ],
      3: [
        { name: "Chemistry",           start: "10:00", end: "10:50" },
        { name: "Intro to Psychology", start: "11:00", end: "12:15" },
        { name: "Uncanny",             start: "13:15", end: "14:30" },
      ],
      4: [
        { name: "Reasoning bout Unreasonable", start: "11:00", end: "12:15" },
        { name: "Chem Lab",                     start: "13:00", end: "16:00" },
      ],
      5: [ { name: "Chemistry", start: "10:00", end: "10:50" } ],
      0: [],  // Sunday
      6: [],  // Saturday
    };

    const lockedPhrase = "She's locked asf";
    const BASE_TZ = "America/Los_Angeles"; // California

    // Display timezones (labels + offsets from California wall time)
    const DISPLAY_OPTS = {
      CA: { label: "üå¥ California", tz: "America/Los_Angeles", offsetMinutesFromCA: 0 },
      CHI:{ label: "ü´ò Chicago",    tz: "America/Chicago",     offsetMinutesFromCA: 120 }, // PT -> CT is +2h
    };
    let displayKey = localStorage.getItem("displayTZ") || "CA";

    // ---------- Helpers ----------
    function nowInTZ(tz){
      const fmt = new Intl.DateTimeFormat("en-US", {
        timeZone: tz, year:"numeric", month:"2-digit", day:"2-digit",
        hour:"2-digit", minute:"2-digit", second:"2-digit", hour12:false
      });
      const parts = Object.fromEntries(fmt.formatToParts(new Date()).map(p => [p.type, p.value]));
      return new Date(`${parts.year}-${parts.month}-${parts.day}T${parts.hour}:${parts.minute}:${parts.second}`);
    }
    function toMinutes(hhmm){ const [h,m]=hhmm.split(":").map(Number); return h*60+m; }
    function minutesSinceMidnight(d){ return d.getHours()*60 + d.getMinutes(); }
    const pad = n => n.toString().padStart(2,"0");
    function fmt12(h24,m){ const am=h24<12; const h12=((h24+11)%12)+1; return `${h12}:${pad(m)} ${am?"AM":"PM"}`; }

    // Convert a California wall-time "HH:MM" to selected display zone via fixed offset
    function convertFromCA(hhmm){
      const mins = toMinutes(hhmm) + DISPLAY_OPTS[displayKey].offsetMinutesFromCA;
      const norm = ((mins % (24*60)) + (24*60)) % (24*60);
      const h = Math.floor(norm/60), m = norm % 60;
      return fmt12(h,m);
    }
    function fmtRangeDisplay(startHHMM,endHHMM){
      return `${convertFromCA(startHHMM)} ‚Äì ${convertFromCA(endHHMM)}`;
    }
    function weekdayNameInTZ(d,tz){ return new Intl.DateTimeFormat("en-US",{weekday:"long", timeZone:tz}).format(d); }

    function currentBlockForCA(dayIndex, minutes){
      const blocks = schedule[dayIndex] || [];
      for (const b of blocks){
        const s = toMinutes(b.start), e = toMinutes(b.end);
        if (minutes >= s && minutes < e) return b;
      }
      return null;
    }

    // ---------- DOM ----------
    const dayLabelEl = document.getElementById("dayLabel");
    const statusEl   = document.getElementById("status");
    const rangeEl    = document.getElementById("range");
    const clockEl    = document.getElementById("clock");
    const tzToggle   = document.getElementById("tzToggle");
    const tzMenu     = document.getElementById("tzMenu");

    function updateToggleUI(){
      tzToggle.textContent = DISPLAY_OPTS[displayKey].label;
      tzToggle.setAttribute("aria-expanded", tzMenu.style.display === "block");
    }
    function openMenu(show){
      tzMenu.style.display = show ? "block" : "none";
      updateToggleUI();
    }
    tzToggle.addEventListener("click", () => openMenu(tzMenu.style.display !== "block"));
    tzMenu.addEventListener("click", (e) => {
      const item = e.target.closest(".tz-item");
      if(!item) return;
      displayKey = item.dataset.tz;
      localStorage.setItem("displayTZ", displayKey);
      openMenu(false);
      update();
    });
    document.addEventListener("click", (e) => {
      if (!tzMenu.contains(e.target) && e.target !== tzToggle) openMenu(false);
    });

    function update(){
      // Logic time: California
      const nowCA = nowInTZ(BASE_TZ);
      const dayIndexCA = nowCA.getDay();
      const minsCA = minutesSinceMidnight(nowCA);

      // Day label + live clock in display zone
      const dispTZ = DISPLAY_OPTS[displayKey].tz;
      dayLabelEl.textContent = weekdayNameInTZ(new Date(), dispTZ);

      const t = new Intl.DateTimeFormat("en-US", {
        timeZone: dispTZ, hour:"2-digit", minute:"2-digit", second:"2-digit", hour12:true
      }).format(new Date());
      clockEl.textContent = t;

      // Determine current/next
      const blocks = schedule[dayIndexCA] || [];
      const block  = currentBlockForCA(dayIndexCA, minsCA);

      if (block){
        statusEl.textContent = block.name;
        rangeEl.textContent  = `${fmtRangeDisplay(block.start, block.end)} (${DISPLAY_OPTS[displayKey].label})`;
      } else {
        // Find the next block later today (in CA time)
        const next = blocks.find(b => minsCA < toMinutes(b.end));
        if (next){
          statusEl.textContent = lockedPhrase;
          rangeEl.textContent  = `Next Class: ${next.name} ‚Ä¢ ${fmtRangeDisplay(next.start, next.end)} (${DISPLAY_OPTS[displayKey].label})`;
        } else {
          // No more classes left today (but if today has zero classes total, we keep weekend behavior)
          if (blocks.length > 0){
            statusEl.textContent = "All Done With Classes! üéâ";
            rangeEl.textContent  = "";
          } else {
            // e.g., Saturday/Sunday: remain ‚Äúlocked asf‚Äù
            statusEl.textContent = lockedPhrase;
            rangeEl.textContent  = "";
          }
        }
      }
    }

    updateToggleUI();
    update();
    setInterval(update, 1000);
  </script>
</body>
</html>

